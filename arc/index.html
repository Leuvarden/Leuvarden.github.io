<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>Arc</title>
	<script type="text/javascript" src="phaser.min.js"></script>
</head>

<body>
	<div id="test"></div>
	<!-- <script type="text/javascript">
		var game = new Phaser.Game(600, 400, Phaser.AUTO, 'test');

		var BasicGame = function(game) {};

		BasicGame.Boot = function(game) {};

		var pie;

		BasicGame.Boot.prototype = {
			preload: function() {
				game.time.advancedTiming = true;
			},
			create: function() {
				pie = new PieProgress(game, game.world.centerX, game.world.centerY, 32);
				game.world.add(pie);

				game.add.tween(pie).to({
					progress: 0
				}, 2000, Phaser.Easing.Quadratic.InOut, true, 0, Infinity, true);

				game.add.tween(pie).to({
					radius: 64
				}, 1000, Phaser.Easing.Back.InOut, true, 1000, Infinity, true);

				game.time.events.loop(500, function() {
					pie.color = game.rnd.pick(["#f00", "#0f0", "#00f", "#ff0", "#0ff", "#f0f", "#fff"]);
				}, this);
			},
			update: function() {

			},
			render: function() {
				game.debug.text(game.time.fps || '--', 2, 14, "#00ff00");
			}
		};

		var PieProgress = function(game, x, y, radius, color, angle) {
			this._radius = radius;
			this._progress = 1;
			this.bmp = game.add.bitmapData(radius * 2, radius * 2);
			Phaser.Sprite.call(this, game, x, y, this.bmp);

			this.anchor.set(0.5);
			this.angle = angle || -90;
			this.color = color || "#fff";
			this.updateProgress();
		}

		PieProgress.prototype = Object.create(Phaser.Sprite.prototype);
		PieProgress.prototype.constructor = PieProgress;

		PieProgress.prototype.updateProgress = function() {
			var progress = this._progress;
			progress = Phaser.Math.clamp(progress, 0.00001, 0.99999);

			this.bmp.clear();
			this.bmp.ctx.fillStyle = this.color;
			this.bmp.ctx.beginPath();
			this.bmp.ctx.arc(this._radius, this._radius, this._radius, 0, (Math.PI * 2) * progress, true);
			this.bmp.ctx.lineTo(this._radius, this._radius);
			this.bmp.ctx.closePath();
			this.bmp.ctx.fill();
			this.bmp.dirty = true;
		}

		Object.defineProperty(PieProgress.prototype, 'radius', {
			get: function() {
				return this._radius;
			},
			set: function(val) {
				this._radius = (val > 0 ? val : 0);
				this.bmp.resize(this._radius * 2, this._radius * 2);
				this.updateProgress();
			}
		});

		Object.defineProperty(PieProgress.prototype, 'progress', {
			get: function() {
				return this._progress;
			},
			set: function(val) {
				this._progress = Phaser.Math.clamp(val, 0, 1);
				this.updateProgress();
			}
		});



		game.state.add('Boot', BasicGame.Boot);
		game.state.start('Boot');
	</script> -->

	<script type="text/javascript">
		var game = new Phaser.Game(700, 700, Phaser.AUTO, 'test', {preload: preload, create: create});

		function preload() {
			game.load.image('center', 'circle2.png');
			game.load.image('outer', 'circle1.png');
			game.load.image('middle',  'circle3.png')
		}

		function create() {
			game.stage.backgroundColor = '#ffffff';
			let outer = game.add.sprite(game.world.centerX, game.world.centerY, 'outer');
			let middle = game.add.sprite(game.world.centerX, game.world.centerY, 'middle');
			let center = game.add.sprite(game.world.centerX, game.world.centerY, 'center');

			outer.anchor.setTo(0.5, 0.5);
			center.anchor.setTo(0.5, 0.5);
			middle.anchor.setTo(0.5, 0.5);

			outer.inputEnabled = true;
			middle.inputEnabled = true;
			center.inputEnabled = true; //if center have no enabled input, clicking on it will enable

    	 let text = game.add.text(0, 16, '', { fill: '#5577ff' });
			 let counter = 0;

			 let listener = function () {
    	 //counter++;
    //	 text.text = "You rotate " + circle.angle + " angles!";
			 }

			let rotateCircle = function (circle) {
				console.log(circle.angle);
				console.log(Math.round(circle.angle));
				circle.angle = Math.round(circle.angle-30); //because otherwise I'll get -119.99999 instead of -120
				//text.text = circle.angle + " angles!";

			}

			// let rotateCenter = function () {
			// 	center.angle += 30;
			// }

    	outer.events.onInputDown.add(listener, this);
			outer.events.onInputDown.add(rotateCircle, this);
			middle.events.onInputDown.add(rotateCircle, this);
			//center.events.onInputDown.add(rotateCenter, this);

		}




	</script>
</body>

</html>
